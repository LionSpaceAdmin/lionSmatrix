{
	"name": "LionSpace Codespaces",
	"dockerComposeFile": "../../.devcontainer/docker-compose.yml",
	"service": "app",
	"workspaceFolder": "/workspace",
	"shutdownAction": "stopCompose",

	// GitHub Codespaces specific settings
	"hostRequirements": {
		"cpus": 4,
		"memory": "8gb",
		"storage": "32gb"
	},

	// Codespaces specific features
	"features": {
		"ghcr.io/devcontainers/features/node:1": {
			"nodeGypDependencies": true,
			"version": "20",
			"nvmVersion": "latest"
		},
		"ghcr.io/devcontainers/features/github-cli:1": {
			"installDirectlyFromGitHubRelease": true,
			"version": "latest"
		}
	},

	// VS Code Extensions עבור Codespaces
	"customizations": {
		"vscode": {
			"extensions": [
				// Essential TypeScript & Next.js
				"ms-vscode.vscode-typescript-next",
				"bradlc.vscode-tailwindcss",
				
				// GitHub & AI
				"github.copilot",
				"github.copilot-chat", 
				"github.vscode-pull-request-github",
				"github.remotehub",
				"eamodio.gitlens",
				
				// Code Quality
				"dbaeumer.vscode-eslint",
				"esbenp.prettier-vscode",
				"streetsidesoftware.code-spell-checker",
				"usernamehw.errorlens",
				
				// Next.js Development
				"aabassiouni.next-js-app-router-helper",
				"foxundermoon.next-js",
				"imgildev.vscode-next-pack",
				"willluke.nextjs",
				"dsznajder.es7-react-js-snippets",
				
				// Browser & Live Development
				"ms-vscode.live-server",
				"ms-vscode.vscode-simple-browser",
				"fermelone.simple-browser-multi",
				
				// Testing (E2E only)
				"ms-playwright.playwright",
				
				// Development Tools
				"christian-kohler.npm-intellisense",
				"christian-kohler.path-intellisense",
				"formulahendry.auto-rename-tag",
				
				// Productivity (minimal)
				"pkief.material-icon-theme"
			],
			
			"settings": {
				// Codespaces specific optimizations
				"terminal.integrated.defaultProfile.linux": "zsh",
				"files.watcherExclude": {
					"**/.git/objects/**": true,
					"**/.git/subtree-cache/**": true,
					"**/node_modules/**": true,
					"**/.next/**": true
				},
				
				// GitHub Codespaces performance
				"extensions.experimental.affinity": {
					"GitHub.copilot": 1,
					"GitHub.copilot-chat": 1
				},
				
				// TypeScript settings
				"typescript.suggest.autoImports": true,
				"typescript.updateImportsOnFileMove.enabled": "always",
				
				// Format settings
				"editor.formatOnSave": true,
				"editor.codeActionsOnSave": {
					"source.fixAll.eslint": "explicit",
					"source.organizeImports": "explicit"
				},
				
				// GitHub integration
				"git.autofetch": true,
				"git.enableSmartCommit": true,
				"github.gitProtocol": "https"
			}
		},
		
		// Codespaces specific settings
		"codespaces": {
			"openFiles": [
				"README.md",
				".devcontainer/README.md",
				"package.json"
			]
		}
	},

	// Port forwarding
	"forwardPorts": [3000, 6006, 5432, 9222],
	"portsAttributes": {
		"3000": {
			"label": "Next.js Dev Server",
			"onAutoForward": "notify"
		},
		"6006": {
			"label": "Storybook", 
			"onAutoForward": "silent"
		}
	},

	// Lifecycle commands 
	"onCreateCommand": "../../.devcontainer/scripts/onCreateCommand.sh",
	"updateContentCommand": "../../.devcontainer/scripts/updateContentCommand.sh", 
	"postCreateCommand": "../../.devcontainer/scripts/postCreateCommand.sh",
	"postAttachCommand": "../../.devcontainer/scripts/postAttachCommand.sh",

	// Environment variables
	"containerEnv": {
		"NODE_ENV": "development",
		"FORCE_COLOR": "1",
		"NPM_CONFIG_COLOR": "always",
		"DATABASE_URL": "postgresql://postgres:postgres@db:5432/lionspace_dev",
		"GITHUB_CODESPACES": "true",
		"CODESPACE_NAME": "${CODESPACE_NAME}",
		"CHOKIDAR_USEPOLLING": "true",
		"WATCHPACK_POLLING": "true"
	},

	// User settings
	"remoteUser": "vscode",
	"containerUser": "vscode"
}