# דוח בעיות סביבת פיתוח - Lions of Zion

## בעיות שזוהו

### בעיות קריטיות 🚨

1. חוסר תאימות בין גרסאות React ו-TypeScript
   - React 19.1.0 מותקן ב-apps/web
   - React 18.2.0 מותקן ב-root
   - @types/react לא תואם לגרסה 19

2. גרסאות לא מסונכרנות במונורפו
   - Next.js: גרסאות שונות בין root ל-apps/web
   - חבילות @radix-ui דורשות עדכון לתמיכה ב-React 19

### בעיות אבטחה 🔒

1. חולשות אבטחה בחבילות:
   - xmldom (קריטי)
   - esbuild (בינוני)
   - fast-jwt (בינוני)
   - tmp (נמוך)

### בעיות תצורה ⚙️

1. בעיות בקונפיגורציית TypeScript:
   - שגיאות type ב-components
   - הגדרות לא מעודכנות עבור React 19

2. בעיות מנהל חבילות:
   - כפילות בין .npmrc ו-.pnpmrc
   - הגדרות container לא אופטימליות

### בעיות מבנה 🏗️

1. מבנה Monorepo:
   - שירותים משתמשים בגרסאות ישנות
   - חסרים קבצי package.json
   - תלויות שגויות ב-root

2. קונפיגורציית סביבה:
   - חסר .env.local ב-root
   - משתני סביבה חסרים

## רשימת משימות לתיקון 📝

### שלב 1 - תיקונים קריטיים

- [ ] עדכון גרסאות React ו-TypeScript
  - [ ] סנכרון גרסת React ל-19.1.0 בכל המונורפו
  - [ ] עדכון @types/react לגרסה תואמת
  - [ ] עדכון חבילות @radix-ui

- [ ] תיקון חולשות אבטחה
  - [ ] עדכון xmldom לגרסה האחרונה
  - [ ] עדכון esbuild
  - [ ] עדכון fast-jwt
  - [ ] עדכון tmp

### שלב 2 - תיקוני תצורה

- [ ] תיקון הגדרות TypeScript
  - [ ] עדכון tsconfig.json
  - [ ] תיקון שגיאות type בקומפוננטות

- [ ] סידור מנהל חבילות
  - [ ] איחוד הגדרות .npmrc ו-.pnpmrc
  - [ ] אופטימיזציה להגדרות container

### שלב 3 - שיפורי מבנה

- [ ] תיקון מבנה Monorepo
  - [ ] עדכון גרסאות בשירותים
  - [ ] השלמת קבצי package.json חסרים
  - [ ] העברת תלויות נכונה בין root ל-workspaces

- [ ] השלמת קונפיגורציית סביבה
  - [ ] יצירת .env.local ב-root
  - [ ] השלמת משתני סביבה חסרים

## פקודות לביצוע 🛠️

```bash
# עדכון גרסאות
pnpm update react@19.1.0 next@15.5.2 --recursive

# עדכון חבילות אבטחה
pnpm update xmldom@latest esbuild@latest fast-jwt@latest tmp@latest

# עדכון שירותים
cd services/auth && pnpm update
cd services/war-machine && pnpm update

# ניקוי וריענון
pnpm clean && rm -rf node_modules && pnpm install
```

## הערות נוספות 📌

1. יש לבצע את העדכונים בשלבים כדי לוודא שלא נשברים דברים
2. חשוב לבדוק את התאימות של כל החבילות עם React 19
3. מומלץ לבצע בדיקות מקיפות אחרי כל שלב
4. יש לשמור על גיבוי של קבצי הקונפיגורציה לפני השינויים
